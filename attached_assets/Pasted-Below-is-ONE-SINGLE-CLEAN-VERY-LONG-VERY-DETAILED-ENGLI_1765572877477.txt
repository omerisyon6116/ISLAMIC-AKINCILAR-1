Below is ONE SINGLE, CLEAN, VERY LONG, VERY DETAILED, ENGLISH â€œMASTER PROMPTâ€ that merges EVERYTHING we built step-by-step.

This is not a normal prompt.
This is a platform-level / enterprise-grade / final boss prompt.

You can paste this directly into Replit / Cursor / Copilot / any AI coding agent.

â¸»

ğŸš€ MASTER ULTRA PROMPT (ENGLISH)

Enterprise Community Platform + CMS + Events + Forum + DM + Groups + Multi-Tenant + Security + PWA

â¸»

ğŸ­ ROLE

You are a Principal Full-Stack Platform Architect & Security Engineer with 10+ years of experience.

You build:
	â€¢	production-ready
	â€¢	scalable
	â€¢	secure
	â€¢	maintainable
	â€¢	enterprise-grade platforms

You do NOT build demos, mockups, or half-finished systems.

â¸»

ğŸ›‘ ABSOLUTE RULES (NON-NEGOTIABLE)
	1.	âŒ DO NOT change the existing UI / theme / layout / visual style
	2.	âŒ NO LocalStorage, NO mock data
	3.	âœ… Everything must be real, persistent, database-backed
	4.	âœ… All features must be fully functional
	5.	âœ… Security is mandatory, not optional
	6.	âœ… Database migrations + seed data are required
	7.	âœ… Clean architecture (routes â†’ services â†’ db)
	8.	âœ… Code must be readable and maintainable

â¸»

ğŸ§  PRODUCT VISION

This project is NOT just a website.

It is a long-term, enterprise-ready COMMUNITY PLATFORM for a youth organization
(similar in spirit to Reddit + Discord + CMS combined).

The platform must support:
	â€¢	content publishing
	â€¢	events
	â€¢	discussions
	â€¢	private messaging
	â€¢	moderation
	â€¢	growth into multiple communities (multi-tenant)

â¸»

ğŸ—ï¸ TECH STACK (EXPECTED)
	â€¢	Frontend: React + TypeScript (existing UI preserved)
	â€¢	Backend: Node.js + Express
	â€¢	Database: PostgreSQL
	â€¢	ORM & Migrations: Drizzle or Prisma (choose one, use migrations)
	â€¢	Auth: HttpOnly Cookie Sessions (preferred) OR JWT + refresh cookies
	â€¢	Validation: Zod (mandatory)
	â€¢	Security: CSRF, rate-limit, sanitization, RBAC
	â€¢	Realtime: WebSocket (Socket.IO or ws)
	â€¢	Search: PostgreSQL Full-Text Search
	â€¢	Uploads: Local dev + S3-compatible adapter
	â€¢	PWA: Service Worker + Push Notifications

â¸»

ğŸŒ MULTI-TENANT ARCHITECTURE (CORE REQUIREMENT)

The platform must support multiple communities (tenants) using the same codebase.

Tenant examples:
	â€¢	City-based branches
	â€¢	Different organizations
	â€¢	Separate communities

Tenant identification:
	â€¢	URL path: /:tenantSlug/... (preferred)

â¸»

ğŸ—‚ï¸ DATABASE DESIGN (COMPLETE)

ğŸ¢ Tenants

tenants
- id
- name
- slug (unique)
- plan (free | pro | enterprise)
- status (active | suspended)
- created_at

tenant_settings
- tenant_id
- site_title
- hero_title
- hero_subtitle
- contact_email
- socials (json)
- default_language
- updated_at

tenant_members
- tenant_id
- user_id
- role (owner | admin | moderator | editor | member)
- joined_at


â¸»

ğŸ‘¤ Users & Security

users
- id
- username (unique)
- display_name
- email (unique)
- password_hash
- role
- status (active | suspended | banned)
- bio
- avatar_url
- trust_level
- reputation_points
- last_login_at
- created_at

user_sessions
- id
- user_id
- token_hash
- ip
- user_agent
- expires_at


â¸»

ğŸ“ CMS (Blog & Pages)

posts
- id
- tenant_id
- author_id
- title
- slug
- excerpt
- content
- cover_image
- status (draft | scheduled | published)
- published_at
- seo_title
- seo_description


â¸»

ğŸ“… Events

events
- id
- tenant_id
- title
- description
- location
- event_date
- capacity

event_registrations
- id
- event_id
- user_id (nullable)
- name
- email
- status


â¸»

ğŸ’¬ FORUM SYSTEM (ADVANCED)

Categories

forum_categories
- id
- tenant_id
- name
- slug
- is_locked

Threads

forum_threads
- id
- tenant_id
- category_id
- author_id
- title
- slug
- body
- is_pinned
- is_locked
- views_count
- replies_count
- last_activity_at

Replies

forum_replies
- id
- thread_id
- author_id
- body
- is_hidden

Reactions / Likes

forum_reactions
- user_id
- target_type (thread | reply)
- target_id

Subscriptions & Notifications

forum_subscriptions
- user_id
- thread_id

notifications
- user_id
- type (reply | mention | like | dm | mod_action)
- payload (json)
- is_read


â¸»

ğŸ“¨ DIRECT MESSAGES (DM)

dm_threads
- id
- tenant_id
- created_at

dm_participants
- thread_id
- user_id
- last_read_at

dm_messages
- id
- thread_id
- sender_id
- body
- created_at


â¸»

ğŸ‘¥ GROUPS / ROOMS

groups
- id
- tenant_id
- name
- slug
- visibility (public | private)
- owner_id

group_members
- group_id
- user_id
- role


â¸»

ğŸ›¡ï¸ MODERATION & SAFETY

forum_reports
- reporter_id
- target_type
- target_id
- reason
- status

moderation_logs
- actor_id
- action_type
- target_type
- target_id
- created_at

Features:
	â€¢	report queue
	â€¢	auto-hide on report threshold
	â€¢	mute / suspend / ban
	â€¢	trust-level-based rate limits
	â€¢	slow-mode threads

â¸»

ğŸ” AUTHENTICATION & SECURITY
	â€¢	Register / Login / Logout
	â€¢	Email verification
	â€¢	Password reset
	â€¢	Optional 2FA (TOTP)
	â€¢	CSRF tokens
	â€¢	Rate limiting (auth + posting)
	â€¢	Role-based & permission-based access
	â€¢	Audit logging for admin/mod actions

â¸»

ğŸ”” REAL-TIME & NOTIFICATIONS
	â€¢	WebSocket:
	â€¢	new replies
	â€¢	DMs
	â€¢	notifications
	â€¢	Notification preferences per user
	â€¢	Mention detection (@username)

â¸»

ğŸ” SEARCH (FULL-TEXT)
	â€¢	PostgreSQL FTS
	â€¢	Highlighted results
	â€¢	Filter by:
	â€¢	forum
	â€¢	posts
	â€¢	events
	â€¢	Tenant-scoped search only

â¸»

ğŸ“± PWA + PUSH
	â€¢	Service Worker
	â€¢	Offline shell caching
	â€¢	Push notifications:
	â€¢	replies
	â€¢	mentions
	â€¢	DMs
	â€¢	event reminders
	â€¢	VAPID keys + subscriptions table

â¸»

ğŸ§‘â€ğŸ’¼ ADMIN PANEL (ENTERPRISE)

Admin features:
	â€¢	Content management (posts/events)
	â€¢	Scheduled publishing
	â€¢	Forum moderation queue
	â€¢	User management (roles, bans)
	â€¢	Tenant settings
	â€¢	Invitations
	â€¢	Data export (CSV/JSON)
	â€¢	Audit logs
	â€¢	Auto-moderation rules

â¸»

ğŸ“ˆ OBSERVABILITY & OPS
	â€¢	Structured logging
	â€¢	Health endpoint /api/health
	â€¢	Metrics counters (logins, posts, replies)
	â€¢	Error handling with request IDs
	â€¢	.env.example
	â€¢	Seed scripts:
	â€¢	admin user
	â€¢	default tenant
	â€¢	categories

â¸»

ğŸ§© IMPLEMENTATION ORDER (MANDATORY)
	1.	Database migrations + seed
	2.	Auth & sessions
	3.	CMS (posts/events)
	4.	Forum core
	5.	Notifications & subscriptions
	6.	DM + Groups
	7.	Search
	8.	PWA + Push
	9.	Admin & moderation
	10.	Security hardening + cleanup

Each step must leave the app fully working.

â¸»

ğŸ FINAL RESULT

At the end, this repository must represent:

A production-ready, enterprise-grade, multi-tenant community platform
that can be used for years, scaled, audited, moderated, and trusted.

â¸»

ğŸ”¥ OPTIONAL FINAL ADD-ONS (ONLY IF CLEANLY POSSIBLE)
	â€¢	Google SSO
	â€¢	Stripe plans & quotas
	â€¢	Feature flags
	â€¢	A/B testing
	â€¢	Content approval workflows

â¸»

If you want, next I can:
	â€¢	compress this for Cursor
	â€¢	split into Backend-only / Frontend-only prompts
	â€¢	turn it into a technical specification PDF
	â€¢	convert it into a startup-ready SaaS blueprint

Just say the word.